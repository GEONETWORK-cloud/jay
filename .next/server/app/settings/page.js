(()=>{var e={};e.id=938,e.ids=[938],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(482),i=s(9108),a=s(2563),l=s.n(a),n=s(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8826)),"D:\\Githubfiles\\x321\\app\\settings\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,818)),"D:\\Githubfiles\\x321\\app\\settings\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8982)),"D:\\Githubfiles\\x321\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Githubfiles\\x321\\app\\settings\\page.tsx"],u="/settings/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8553:(e,t,s)=>{Promise.resolve().then(s.bind(s,8917))},5303:()=>{},8917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(5344),i=s(3729),a=s(8428),l=s(2456),n=s(8536),o=s(7296),c=s(7097),d=s(3424),u=s(7521),x=s(1626),m=s(6113);function p(){let[e,t]=(0,i.useState)(!0),[s,p]=(0,i.useState)(!1),[g,h]=(0,i.useState)(null),[f,b]=(0,i.useState)(""),[y,j]=(0,i.useState)(null),[v,N]=(0,i.useState)("profile"),[w,P]=(0,i.useState)(""),[q,k]=(0,i.useState)(""),[U,S]=(0,i.useState)(!1),[A,_]=(0,i.useState)(null),C=(0,i.useRef)(null),[E,D]=(0,i.useState)(!1),G=(0,a.useRouter)(),{user:R}=(0,o.useAuth)(),L=e=>{if(!e)return"https://via.placeholder.com/150";let t=(0,m.createHash)("md5").update(e.toLowerCase().trim()).digest("hex");return`https://www.gravatar.com/avatar/${t}?s=150&d=mp`};(0,i.useEffect)(()=>{if(!R){G.push("/login");return}(async function(){if(R)try{t(!0),j(null);let e=(0,c.JU)(u.db,"users",R.uid),s=await (0,c.QT)(e),r=R.photoURL||(R.email?L(R.email):"");if(k(r),s.exists()){let e=s.data();h(e),b(e.displayName||""),D("public"===e.emailPrivacy),e.photoURL&&k(e.photoURL)}else{let e={email:R.email,displayName:"",emailPrivacy:"private",showEmail:!1,notifications:{email:!1,push:!1},privacy:{profileVisibility:"public",showActivity:!0},theme:"light",createdAt:new Date,updatedAt:new Date};await (0,c.pl)((0,c.JU)(u.db,"users",R.uid),e),h(e),b("")}}catch(e){console.error("Error loading user data:",e),j("Failed to load profile. Please try again later.")}finally{t(!1)}})()},[R,G]);let $=async e=>{let t=e.target.files?.[0];if(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type)){(0,x.c0)("Please select a valid image file (JPEG, PNG, GIF)","error");return}if(t.size>5242880){(0,x.c0)("Image must be less than 5MB","error");return}try{S(!0);let e=(0,d.iH)(u.tO,`profile-images/${R?.uid}_${Date.now()}`);await (0,d.KV)(e,t);let s=await (0,d.Jt)(e);k(s),S(!1)}catch(e){console.error("Error uploading file:",e),(0,x.c0)("Failed to upload image","error"),S(!1)}}},F=async e=>{if(e.preventDefault(),!R){G.push("/login");return}try{p(!0),j(null);let e=(0,c.JU)(u.db,"users",R.uid);await (0,c.r7)(e,{displayName:f,photoURL:q,emailPrivacy:E?"public":"private",updatedAt:new Date}),(0,x.c0)("Profile updated successfully","success");let t=await (0,c.QT)(e);t.exists()&&h(t.data()),p(!1)}catch(e){console.error("Error saving profile:",e),j("Failed to update profile. Please try again."),p(!1)}};return R?(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[r.jsx(n.Z,{}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Settings"}),r.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),y&&(0,r.jsxs)("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 flex items-start",children:[r.jsx(l.bcx,{className:"mt-0.5 mr-2 flex-shrink-0"}),r.jsx("span",{children:y})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("div",{className:"sm:flex sm:items-center",children:r.jsx("div",{className:"px-4 sm:px-6",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{type:"button",onClick:()=>N("profile"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${"profile"===v?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,title:"Profile settings","aria-label":"Profile settings",children:"Profile"}),r.jsx("button",{type:"button",onClick:()=>N("account"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${"account"===v?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,title:"Account settings","aria-label":"Account settings",children:"Account"})]})})})}),e?r.jsx("div",{className:"p-8 flex justify-center",children:r.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):(0,r.jsxs)("div",{className:"p-4 sm:p-6",children:["profile"===v&&(0,r.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Image"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[r.jsx("div",{className:"flex-shrink-0",children:(0,r.jsxs)("div",{className:"relative h-32 w-32 rounded-full overflow-hidden bg-gray-200 border border-gray-300",children:[q?r.jsx("img",{src:q,alt:"Profile Preview",className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:r.jsx(l.fzv,{size:48})}),U&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:r.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]})}),(0,r.jsxs)("div",{className:"w-full space-y-4",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>_("url"),className:`flex items-center px-4 py-2 rounded-md ${"url"===A?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,title:"Use image URL","aria-label":"Use image URL",children:[r.jsx(l.XKb,{className:"mr-2"}),"Use URL"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{_("upload"),setTimeout(()=>C.current?.click(),100)},className:`flex items-center px-4 py-2 rounded-md ${"upload"===A?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,title:"Upload image","aria-label":"Upload image",children:[r.jsx(l.Yjd,{className:"mr-2"}),"Upload"]}),r.jsx("input",{type:"file",ref:C,onChange:$,className:"hidden",accept:"image/jpeg,image/png,image/gif",title:"Upload profile image"})]}),"url"===A&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("input",{type:"text",value:w,onChange:e=>P(e.target.value),placeholder:"Enter image URL",className:"flex-1 px-3 py-2 border rounded-l-md border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),r.jsx("button",{type:"button",onClick:e=>{if(e.preventDefault(),w)try{new URL(w),k(w),P(""),_(null)}catch(e){(0,x.c0)("Please enter a valid URL","error")}},className:"px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700",children:"Set"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Enter a valid URL to an image (JPEG, PNG, GIF)"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("button",{type:"button",onClick:()=>D(!E),className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${E?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,title:E?"Make email public":"Make email private","aria-label":E?"Make email public":"Make email private",children:E?(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.rzC,{className:"mr-1",size:14}),r.jsx("span",{children:"Show email in profile"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.rDJ,{className:"mr-1",size:14}),r.jsx("span",{children:"Hide email in profile"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center border rounded-lg px-3 py-2 bg-gray-50 text-gray-500",children:[r.jsx(l.Imn,{className:"mr-2"}),r.jsx("span",{children:R?.email})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:E?"Your email will be hidden from other users":"Your email will be visible to other users"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),(0,r.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 p-2 text-gray-500",children:r.jsx(l.fzv,{})}),r.jsx("input",{id:"displayName",type:"text",value:f,onChange:e=>b(e.target.value),className:"block w-full px-3 py-2 outline-none",placeholder:"Enter your display name"})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This name will be displayed to other users in the application"})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.mW3,{size:18}),r.jsx("span",{children:"Save Changes"})]})})})]}),"account"===v&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Settings"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsx("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Account Type"}),r.jsx("p",{className:"text-sm text-gray-500",children:g?.role==="admin"?"Administrator":"Standard User"})]})})}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email Privacy"}),r.jsx("p",{className:"text-sm text-gray-500",children:E?"Your email is hidden from other users":"Your email is visible to other users"})]}),r.jsx("div",{children:r.jsx("button",{type:"button",onClick:()=>{D(!E)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${E?"bg-gray-200":"bg-indigo-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${E?"translate-x-1":"translate-x-6"}`})})})]})}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsx("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Account Created"}),r.jsx("p",{className:"text-sm text-gray-500",children:g?.createdAt?new Date(g.createdAt).toLocaleDateString():"Unknown"})]})})})]})]})]})]})]}):null}},818:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5036);function i({children:e}){return r.jsx(r.Fragment,{children:e})}s(2)},8826:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`D:\Githubfiles\x321\app\settings\page.tsx`),{__esModule:i,$$typeof:a}=r,l=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,318,506,432,538],()=>s(8151));module.exports=r})();