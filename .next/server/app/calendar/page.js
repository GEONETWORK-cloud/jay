(()=>{var e={};e.id=329,e.ids=[329],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9184:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var a=r(482),s=r(9108),n=r(2563),i=r.n(n),l=r(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8344)),"D:\\Githubfiles\\x321\\app\\calendar\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1478)),"D:\\Githubfiles\\x321\\app\\calendar\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8982)),"D:\\Githubfiles\\x321\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Githubfiles\\x321\\app\\calendar\\page.tsx"],u="/calendar/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7975:(e,t,r)=>{Promise.resolve().then(r.bind(r,6688))},5303:()=>{},6688:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(5344),s=r(3729),n=r(8428),i=r(8536),l=r(2456);let d=[{label:"Blue",value:"bg-blue-500"},{label:"Green",value:"bg-green-500"},{label:"Red",value:"bg-red-500"},{label:"Purple",value:"bg-purple-500"},{label:"Yellow",value:"bg-yellow-500"},{label:"Indigo",value:"bg-indigo-500"}],o=[{label:"Meeting",value:"meeting"},{label:"Task",value:"task"},{label:"Reminder",value:"reminder"},{label:"Other",value:"other"}];function c({event:e,onSave:t,onCancel:r,isOpen:n}){let[i,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[j,D]=(0,s.useState)(!1),[w,N]=(0,s.useState)("meeting"),[E,S]=(0,s.useState)("bg-blue-500"),[C,q]=(0,s.useState)(!1),[k,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(e){if(c(e.title||""),m(e.description||""),e.startDate){let t=e.startDate instanceof Date?e.startDate:new Date(e.startDate.toDate());g(M(t)),j||p(T(t))}else{let e=new Date;g(M(e)),p(T(e))}if(e.endDate){let t=e.endDate instanceof Date?e.endDate:new Date(e.endDate.toDate());v(M(t)),j||y(T(t))}D(e.allDay||!1),N(e.type||"meeting"),S(e.color||"bg-blue-500")}else{let e=new Date;g(M(e)),p(T(e));let t=new Date(e.getTime()+36e5);v(M(t)),y(T(t))}},[e,j]);let M=e=>e.toISOString().split("T")[0],T=e=>e.toTimeString().substring(0,5),P=async e=>{e.preventDefault(),F(null);try{let e;if(!i.trim()){F("Event title is required");return}if(!x){F("Start date is required");return}let r=new Date(`${x}T${j?"00:00":h}`),a=new Date,s=new Date(a);if(s.setHours(1,0,0,0),r<s){F("Start time must be at least 1:00 AM");return}if(b){if((e=new Date(`${b}T${j?"23:59":f||"23:59"}`))<r){F("End time cannot be before start time");return}let t=new Date(e);if(t.setHours(23,0,0,0),e>t){F("End time cannot be after 11:00 PM");return}}q(!0);let n={title:i,description:u,startDate:r,endDate:e,allDay:j,type:w,color:E,createdBy:"currentUser"};await t(n)}catch(e){console.error("Error submitting event:",e),F("Failed to save event. Please try again.")}finally{q(!1)}},A=(e,t)=>{if(!e)return!0;let[r,a]=e.split(":").map(Number);return t?r>=1:r<=23},U=(e,t)=>{let r=e.target.value;A(r,t)?t?p(r):y(r):F(t?"Start time must be at least 1:00 AM":"End time cannot be after 11:00 PM")};return n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-indigo-600 text-white p-4",children:[a.jsx("h2",{className:"text-lg font-medium",children:e?.id?"Edit Event":"Add New Event"}),a.jsx("button",{onClick:r,className:"text-white hover:text-gray-200",title:"Close","aria-label":"Close",children:a.jsx(l.q5L,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:P,className:"p-6 space-y-4",children:[k&&a.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:k}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Title*"}),a.jsx("input",{id:"title",type:"text",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter event title",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",rows:3,placeholder:"Enter event description"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{id:"allDay",type:"checkbox",checked:j,onChange:e=>D(e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"allDay",className:"ml-2 block text-sm text-gray-700",children:"All-day event"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date*"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(l.vlc,{className:"text-gray-400"})}),a.jsx("input",{id:"startDate",type:"date",value:x,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",required:!0})]})]}),!j&&(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"startTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time (min 1:00 AM)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(l.TCC,{className:"text-gray-400"})}),a.jsx("input",{id:"startTime",type:"time",value:h,onChange:e=>U(e,!0),min:"01:00",className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(l.vlc,{className:"text-gray-400"})}),a.jsx("input",{id:"endDate",type:"date",value:b,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})]}),!j&&(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"endTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time (max 11:00 PM)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(l.TCC,{className:"text-gray-400"})}),a.jsx("input",{id:"endTime",type:"time",value:f,onChange:e=>U(e,!1),max:"23:00",className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),a.jsx("select",{id:"type",value:w,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:o.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),a.jsx("select",{id:"color",value:E,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:d.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:C?"Saving...":"Save Event"})]})]})]})}):null}var u=r(7296),m=r(7521),x=r(7097),g=r(1626);function h(e){if(e)return e instanceof x.EK?e:x.EK.fromDate(e)}function p(e){if(e)return e instanceof Date?e:e.toDate()}async function b(e,t){try{if(!m.I8.currentUser)throw Error("User must be authenticated");let r=(0,x.hJ)(m.db,"calendarEvents"),a=new Date(e,t,1),s=new Date(e,t+1,0,23,59,59),n=(0,x.IO)(r,(0,x.ar)("createdBy","==",m.I8.currentUser.uid),(0,x.ar)("startDate",">=",h(a)),(0,x.ar)("startDate","<=",h(s)),(0,x.Xo)("startDate","asc"));return(await (0,x.PL)(n)).docs.map(e=>{let t=e.data();return{id:e.id,...t,startDate:p(t.startDate),endDate:p(t.endDate),createdAt:p(t.createdAt),updatedAt:p(t.updatedAt)}})}catch(e){throw console.error("Error loading events by month:",e),(0,g.c0)("Failed to load calendar events","error"),e}}async function v(e){try{if(!m.I8.currentUser)throw Error("User must be authenticated");let t=(0,x.hJ)(m.db,"calendarEvents"),r={...e,startDate:h(e.startDate),endDate:h(e.endDate),createdBy:m.I8.currentUser.uid,createdAt:(0,x.Bt)(),updatedAt:(0,x.Bt)()},a={id:(await (0,x.ET)(t,r)).id,...e,createdBy:m.I8.currentUser.uid,startDate:e.startDate,endDate:e.endDate};return(0,g.c0)("Event created successfully","success"),a}catch(e){throw console.error("Error creating calendar event:",e),(0,g.c0)("Failed to create event","error"),e}}async function f(e,t){try{if(!m.I8.currentUser)throw Error("User must be authenticated");let r=(0,x.JU)(m.db,"calendarEvents",e),a=await (0,x.QT)(r);if(!a.exists())throw Error("Event not found");if(a.data().createdBy!==m.I8.currentUser.uid)throw Error("Not authorized to update this event");let s={...t,startDate:h(t.startDate),endDate:h(t.endDate),updatedAt:(0,x.Bt)()};return await (0,x.r7)(r,s),(0,g.c0)("Event updated successfully","success"),!0}catch(e){throw console.error("Error updating calendar event:",e),(0,g.c0)("Failed to update event","error"),e}}async function y(e){try{if(!m.I8.currentUser)throw Error("User must be authenticated");let t=(0,x.JU)(m.db,"calendarEvents",e),r=await (0,x.QT)(t);if(!r.exists())throw Error("Event not found");if(r.data().createdBy!==m.I8.currentUser.uid)throw Error("Not authorized to delete this event");return await (0,x.oe)(t),(0,g.c0)("Event deleted successfully","success"),!0}catch(e){throw console.error("Error deleting calendar event:",e),(0,g.c0)("Failed to delete event","error"),e}}let j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D=["January","February","March","April","May","June","July","August","September","October","November","December"];function w(){let[e,t]=(0,s.useState)(new Date),[r,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(!0),[p,w]=(0,s.useState)(!1),[N,E]=(0,s.useState)(void 0),S=(0,n.useRouter)(),{user:C}=(0,u.useAuth)(),q=e.getMonth(),k=e.getFullYear(),F=new Date(k,q,1),M=new Date(k,q+1,0).getDate(),T=F.getDay();(0,s.useEffect)(()=>{if(!C){S.push("/login");return}(async function(){try{h(!0);let e=await b(k,q);d(e)}catch(e){console.error("Error loading calendar events:",e),(0,g.c0)("Failed to load calendar events","error")}finally{h(!1)}})()},[k,q,C,S]);let P=e=>{E(e),w(!0)},A=async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await y(e),d(r.filter(t=>t.id!==e)),(0,g.c0)("Event deleted successfully","success")}catch(e){console.error("Error deleting event:",e),(0,g.c0)("Failed to delete event","error")}},U=async e=>{try{if(N?.id)await f(N.id,e),d(t=>t.map(t=>t.id===N.id?{...t,...e,id:N.id}:t)),(0,g.c0)("Event updated successfully","success");else{let t=await v({...e,createdBy:C?.uid||"anonymous"});t.startDate instanceof Date&&t.startDate.getMonth()===q&&t.startDate.getFullYear()===k&&d(e=>[...e,t]),(0,g.c0)("Event created successfully","success")}w(!1),E(void 0)}catch(e){console.error("Error saving event:",e),(0,g.c0)("Failed to save event","error")}},_=[];for(let e=0;e<T;e++){let t=new Date(k,q,0-(T-e-1));_.push({date:t,isPreviousMonth:!0})}for(let e=1;e<=M;e++){let t=new Date(k,q,e);_.push({date:t,isCurrentMonth:!0})}let I=42-_.length;for(let e=1;e<=I;e++){let t=new Date(k,q+1,e);_.push({date:t,isNextMonth:!0})}let $=o?r.filter(e=>e.startDate instanceof Date&&e.startDate.getDate()===o.getDate()&&e.startDate.getMonth()===o.getMonth()&&e.startDate.getFullYear()===o.getFullYear()):[],B=e=>r.filter(t=>t.startDate instanceof Date&&t.startDate.getDate()===e.getDate()&&t.startDate.getMonth()===e.getMonth()&&t.startDate.getFullYear()===e.getFullYear()),G=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[a.jsx(i.Z,{}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Calendar"}),a.jsx("p",{className:"text-gray-600",children:"Manage your schedule and events"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{t(new Date),m(new Date)},className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Today"}),a.jsx("button",{onClick:()=>{t(new Date(k,q-1,1)),m(null)},className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:a.jsx(l.YFh,{})}),a.jsx("button",{onClick:()=>{t(new Date(k,q+1,1)),m(null)},className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:a.jsx(l.Tfp,{})}),(0,a.jsxs)("div",{className:"px-4 py-2 font-medium",children:[D[q]," ",k]})]})]}),x?a.jsx("div",{className:"bg-white rounded-lg shadow p-8 flex justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-7 border-b",children:j.map(e=>a.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:_.map((e,t)=>{let r=B(e.date),s=e.date.toDateString()===new Date().toDateString(),n=o&&e.date.toDateString()===o.toDateString();return(0,a.jsxs)("div",{onClick:()=>m(e.date),className:`
                      min-h-24 p-1 border-t border-r
                      ${e.isCurrentMonth?"bg-white":"bg-gray-50 text-gray-400"} 
                      ${s?"border-blue-500 border-t-2":""}
                      ${n?"bg-blue-50":""}
                      cursor-pointer hover:bg-gray-50
                    `,children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`text-sm ${s?"font-bold text-blue-500":""}`,children:e.date.getDate()}),r.length>0&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[r.slice(0,2).map(e=>a.jsx("div",{className:`text-xs p-1 rounded truncate text-white ${e.color}`,onClick:t=>{t.stopPropagation(),P(e)},children:e.title},e.id)),r.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",r.length-2," more"]})]})]},t)})})]}),o&&(0,a.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium",children:["Events for ",o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,a.jsxs)("button",{onClick:()=>{E(o?{startDate:o}:void 0),w(!0)},className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800",children:[a.jsx(l.OvN,{size:16}),a.jsx("span",{children:"Add Event"})]})]}),$.length>0?a.jsx("div",{className:"space-y-3",children:$.map(e=>(0,a.jsxs)("div",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50",children:[a.jsx("div",{className:`w-4 h-4 rounded-full ${e.color} mr-3`}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:e.title}),e.startDate instanceof Date&&a.jsx("p",{className:"text-sm text-gray-500",children:e.allDay?"All day":G(e.startDate)+(e.endDate instanceof Date?` - ${G(e.endDate)}`:"")}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>P(e),className:"p-1 text-gray-500 hover:text-indigo-600",children:a.jsx(l.IYd,{size:16})}),a.jsx("button",{onClick:()=>e.id&&A(e.id),className:"p-1 text-gray-500 hover:text-red-600",children:a.jsx(l.Ybf,{size:16})})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[a.jsx(l.vlc,{className:"mx-auto mb-2",size:24}),a.jsx("p",{children:"No events scheduled for this day"})]})]}),a.jsx(c,{event:N,isOpen:p,onSave:U,onCancel:()=>{w(!1),E(void 0)}})]})]})}},1478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(5036);function s({children:e}){return a.jsx(a.Fragment,{children:e})}r(2)},8344:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>i});let a=(0,r(6843).createProxy)(String.raw`D:\Githubfiles\x321\app\calendar\page.tsx`),{__esModule:s,$$typeof:n}=a,i=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,318,506,432,538],()=>r(9184));module.exports=a})();