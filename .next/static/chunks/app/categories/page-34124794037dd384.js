(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4457],{9223:function(e,t,s){Promise.resolve().then(s.bind(s,4250))},4250:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(7437),r=s(2265),l=s(7907),i=s(8009),n=s(4499),o=s(8121);let d="categories";async function c(){try{let e=(0,o.IO)((0,o.hJ)(n.db,d),(0,o.Xo)("name","asc"));return(await (0,o.PL)(e)).docs.map(e=>{var t,s;let a=e.data();return{id:e.id,name:a.name,slug:a.slug,description:a.description,createdAt:null===(t=a.createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(s=a.updatedAt)||void 0===s?void 0:s.toDate()}})}catch(e){throw console.error("Error getting categories:",e),e}}async function u(e){try{let t=(0,o.JU)(n.db,d,e);await (0,o.oe)(t)}catch(e){throw console.error("Error deleting category:",e),e}}var m=s(769),x=s(9580),f=s(9295),g=s(489),h=s(5754),b=s(5179),p=s(279),y=s(1657);let j=p.fC;p.xz;let v=p.h_,N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.aV,{className:(0,y.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});N.displayName=p.aV.displayName;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(N,{}),(0,a.jsx)(p.VY,{ref:t,className:(0,y.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-700 dark:bg-gray-800",s),...r})]})});w.displayName=p.VY.displayName;let C=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,y.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};C.displayName="AlertDialogHeader";let k=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,y.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};k.displayName="AlertDialogFooter";let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.Dx,{ref:t,className:(0,y.cn)("text-lg font-semibold",s),...r})});S.displayName=p.Dx.displayName;let z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.dk,{ref:t,className:(0,y.cn)("text-sm text-gray-500 dark:text-gray-400",s),...r})});z.displayName=p.dk.displayName;let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.aU,{ref:t,className:(0,y.cn)("inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:opacity-50",s),...r})});A.displayName=p.aU.displayName;let D=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(p.$j,{ref:t,className:(0,y.cn)("inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2",s),...r})});D.displayName=p.$j.displayName;var E=s(9),F=s(2406);function R(e){let{category:t,isOpen:s,onClose:l,onSuccess:i}=e,[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,f]=(0,r.useState)(!1),[g,h]=(0,r.useState)(null),{user:b}=(0,F.useAuth)();(0,r.useEffect)(()=>{t?(c(t.name),m(t.description||"")):(c(""),m(""))},[t]);let p=async e=>{if(e.preventDefault(),!b){h("You must be logged in to create or edit categories");return}try{f(!0),h(null);let e={name:d,slug:d.toLowerCase().replace(/\s+/g,"-"),description:u,updatedAt:new Date};(null==t?void 0:t.id)?(await (0,o.r7)((0,o.JU)(n.db,"categories",t.id),e),(0,y.c0)("Category updated successfully","success")):(await (0,o.pl)((0,o.JU)(n.db,"categories",b.uid),{...e,createdAt:new Date}),(0,y.c0)("Category created successfully","success")),i(),l()}catch(e){console.error("Error saving category:",e),h("Failed to save category. Please try again.")}finally{f(!1)}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Category":"New Category"}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-500",title:"Close modal",children:(0,a.jsx)(E.q5L,{size:24})})]}),g&&(0,a.jsxs)("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 flex items-start",children:[(0,a.jsx)(E.bcx,{className:"mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsx)("span",{children:g})]}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{id:"name",type:"text",value:d,onChange:e=>c(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter category name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",value:u,onChange:e=>m(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter category description",rows:4})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.mW3,{size:18}),(0,a.jsx)("span",{children:t?"Save Changes":"Create Category"})]})})]})]})]})})}):null}var L=s(1441);function _(){(0,l.useRouter)();let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(""),[p,y]=(0,r.useState)(null),[v,N]=(0,r.useState)(!1),[E,F]=(0,r.useState)(null),[_,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{O()},[]);let O=async()=>{try{n(!0);let e=await c();t(e)}catch(e){i.Am.error("Failed to load categories"),console.error(e)}finally{n(!1)}},U=e=>{y(e),N(!0)},V=async()=>{if(E)try{Z(!0),await u(E),i.Am.success("Category deleted successfully"),O()}catch(e){i.Am.error("Failed to delete category"),console.error(e)}finally{Z(!1),F(null)}},I=e=>{F(e)},J=e.filter(e=>{var t,s;return e.name.toLowerCase().includes(o.toLowerCase())||null!==(s=null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))&&void 0!==s&&s});return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsx)(L.Z,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"}),(0,a.jsxs)(h.z,{onClick:()=>{y(null),N(!0)},children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(b.I,{placeholder:"Search categories...",value:o,onChange:e=>d(e.target.value),className:"max-w-md"})}),s?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-primary"})}):0===J.length?(0,a.jsx)("div",{className:"text-center p-10 border rounded-lg",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No categories found"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-muted",children:[(0,a.jsx)("th",{className:"text-left p-3 border",children:"Name"}),(0,a.jsx)("th",{className:"text-left p-3 border",children:"Slug"}),(0,a.jsx)("th",{className:"text-left p-3 border",children:"Description"}),(0,a.jsx)("th",{className:"text-center p-3 border",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:J.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"p-3 border",children:e.name}),(0,a.jsx)("td",{className:"p-3 border",children:e.slug}),(0,a.jsx)("td",{className:"p-3 border",children:e.description||"-"}),(0,a.jsx)("td",{className:"p-3 border",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>U(e),children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>I(e.id),children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})}),v&&(0,a.jsx)(R,{category:p,isOpen:v,onClose:()=>N(!1),onSuccess:()=>{N(!1),O()}}),(0,a.jsx)(j,{open:null!==E,onOpenChange:e=>!e&&F(null),children:(0,a.jsxs)(w,{children:[(0,a.jsxs)(C,{children:[(0,a.jsx)(S,{children:"Are you absolutely sure?"}),(0,a.jsx)(z,{children:"This action cannot be undone. This will permanently delete the category and all related data."})]}),(0,a.jsxs)(k,{children:[(0,a.jsx)(D,{children:"Cancel"}),(0,a.jsx)(A,{onClick:V,disabled:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})})]})}},5754:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(7437),r=s(2265),l=s(9769),i=s(1657);let n=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-indigo-600 text-white hover:bg-indigo-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input hover:bg-accent hover:text-accent-foreground border-gray-300 text-gray-700 hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-indigo-600 hover:text-indigo-700"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:l,size:o,asChild:d=!1,...c}=e,u=d?r.Fragment:"button";return(0,a.jsx)(u,{className:(0,i.cn)(n({variant:l,size:o,className:s})),ref:t,...c})});o.displayName="Button"},5179:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(7437),r=s(2265),l=s(1657);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"}},function(e){e.O(0,[4358,5239,8218,201,8792,8156,8009,9878,8271,127,2971,8069,1744],function(){return e(e.s=9223)}),_N_E=e.O()}]);