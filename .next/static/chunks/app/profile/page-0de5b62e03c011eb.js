(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{5559:function(e,s,a){Promise.resolve().then(a.bind(a,9939))},9939:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(7437),l=a(2265),r=a(7907),i=a(9),n=a(1441),d=a(2406),c=a(8121),o=a(4499),u=a(1657);function x(){let[e,s]=(0,l.useState)(!0),[a,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),[p,f]=(0,l.useState)(""),[b,g]=(0,l.useState)(null),y=(0,r.useRouter)(),{user:j}=(0,d.useAuth)();(0,l.useEffect)(()=>{if(!j){y.push("/login");return}!async function(){if(j)try{s(!0),g(null);let e=(0,c.JU)(o.db,"users",j.uid),a=await (0,c.QT)(e);if(a.exists()){let e=a.data();h(e),f(e.displayName||"")}else{let e={email:j.email||"",displayName:"",createdAt:new Date};await (0,c.pl)((0,c.JU)(o.db,"users",j.uid),e),h(e),f("")}}catch(e){console.error("Error loading user data:",e),g("Failed to load profile. Please try again later.")}finally{s(!1)}}()},[j,y]);let N=async e=>{if(e.preventDefault(),!j){y.push("/login");return}try{x(!0),g(null);let e=(0,c.JU)(o.db,"users",j.uid);await (0,c.r7)(e,{displayName:p,updatedAt:new Date}),(0,u.c0)("Profile updated successfully","success");let s=await (0,c.QT)(e);s.exists()&&h(s.data()),x(!1)}catch(e){console.error("Error saving profile:",e),g("Failed to update profile. Please try again."),x(!1)}};return j?(0,t.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,t.jsx)(n.Z,{}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Your Profile"}),(0,t.jsx)("p",{className:"text-gray-600",children:"View and edit your account information"})]}),b&&(0,t.jsxs)("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 flex items-start",children:[(0,t.jsx)(i.bcx,{className:"mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsx)("span",{children:b})]}),e?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 flex justify-center",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("form",{onSubmit:N,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsxs)("div",{className:"flex items-center border rounded-lg px-3 py-2 bg-gray-50 text-gray-500",children:[(0,t.jsx)(i.Imn,{className:"mr-2"}),(0,t.jsx)("span",{children:j.email})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Your email cannot be changed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),(0,t.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-50 p-2 text-gray-500",children:(0,t.jsx)(i.fzv,{})}),(0,t.jsx)("input",{id:"displayName",type:"text",value:p,onChange:e=>f(e.target.value),className:"block w-full px-3 py-2 outline-none",placeholder:"Enter your display name"})]}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This name will be displayed to other users in the application"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Saving..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.mW3,{size:18}),(0,t.jsx)("span",{children:"Save Changes"})]})})})]})})]})]}):null}}},function(e){e.O(0,[4358,5239,8218,201,8792,8156,127,2971,8069,1744],function(){return e(e.s=5559)}),_N_E=e.O()}]);