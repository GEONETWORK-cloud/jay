(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3626],{6630:function(e,t,r){Promise.resolve().then(r.bind(r,5217))},5217:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),i=r(2265),o=r(7907),s=r(9),l=r(1441),n=r(2406),c=r(1657),d=r(6828);function u(e){let{params:t}=e,[r,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(!0),[h,g]=(0,i.useState)(!1),[x,j]=(0,i.useState)({title:"",description:"",category:"",imageUrl:"",liveLink:"",projectLink:"",sourceCodeUrl:""}),[b,y]=(0,i.useState)([]),[f,v]=(0,i.useState)(""),[w,N]=(0,i.useState)("#3B82F6"),[k,L]=(0,i.useState)(!1),C=(0,o.useRouter)(),{user:U}=(0,n.useAuth)();(0,i.useEffect)(()=>{async function e(){try{p(!0);let e=await (0,d.e5)(t.id);if(!e){C.push("/projects");return}let r={id:e.id||t.id,title:e.title||"",description:e.description||"",category:e.category||"",tags:e.tags||[],imageUrl:e.imageUrl||"",liveLink:e.liveLink||"",projectLink:e.projectLink||"",sourceCodeUrl:e.sourceCodeUrl||"",createdBy:e.createdBy||"",createdAt:e.createdAt||new Date,updatedAt:e.updatedAt};u(r),y(r.tags),j({title:r.title,description:r.description,category:r.category,imageUrl:r.imageUrl,liveLink:r.liveLink,projectLink:r.projectLink,sourceCodeUrl:r.sourceCodeUrl})}catch(e){console.error("Error loading project:",e)}finally{p(!1)}}U?e():C.push("/login")},[t.id,U,C]);let E=e=>{let{name:t,value:r}=e.target;j(e=>({...e,[t]:r}))},P=async()=>{if(r)try{L(!0);let e={title:x.title,description:x.description,category:x.category,imageUrl:x.imageUrl,liveLink:x.liveLink,projectLink:x.projectLink,sourceCodeUrl:x.sourceCodeUrl,tags:b};await (0,d.ty)(r.id,e),u(t=>t?{...t,...e}:null),g(!1)}catch(e){console.error("Error updating project:",e)}finally{L(!1)}},S=()=>{if(!f.trim())return;let e={name:f.trim(),color:w.replace("#","")};y(t=>[...t,e]),v("")},A=e=>{y(t=>t.filter((t,r)=>r!==e))},D=e=>"string"==typeof e?e:e&&"object"==typeof e&&e.name||"";return m?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsx)(l.Z,{}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})})]}):r?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>C.push("/projects"),className:"mr-4 p-2 bg-white rounded-full shadow-sm hover:bg-gray-50",title:"Back to projects","aria-label":"Back to projects",children:(0,a.jsx)(s.Ao2,{size:18})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:h?"Edit Project":"Project Details"})]}),(0,a.jsx)("div",{children:h?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 flex items-center gap-2 hover:bg-gray-50",disabled:k,title:"Cancel editing","aria-label":"Cancel editing",children:[(0,a.jsx)(s.q5L,{size:16}),(0,a.jsx)("span",{children:"Cancel"})]}),(0,a.jsxs)("button",{onClick:P,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg flex items-center gap-2 hover:bg-indigo-600 disabled:opacity-70",disabled:k,title:"Save changes","aria-label":"Save changes",children:[(0,a.jsx)(s.mW3,{size:16}),(0,a.jsx)("span",{children:k?"Saving...":"Save Changes"})]})]}):(0,a.jsxs)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded-lg flex items-center gap-2 hover:bg-indigo-600",title:"Edit project","aria-label":"Edit project",children:[(0,a.jsx)(s.vPQ,{size:16}),(0,a.jsx)("span",{children:"Edit Project"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"h-64 overflow-hidden relative",children:[h?(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg w-full max-w-md",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),(0,a.jsx)("input",{type:"text",name:"imageUrl",value:x.imageUrl,onChange:E,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Enter image URL",title:"Image URL","aria-label":"Image URL"})]})}):null,(0,a.jsx)("img",{src:r.imageUrl||"https://via.placeholder.com/1200x400?text=No+Image",alt:r.title,className:"w-full h-full object-cover"})]}),(0,a.jsx)("div",{className:"p-6",children:h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,a.jsx)("input",{id:"title",type:"text",name:"title",value:x.title,onChange:E,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Enter project title",title:"Project title","aria-label":"Project title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsxs)("select",{id:"category",name:"category",value:x.category,onChange:E,className:"w-full p-2 border border-gray-300 rounded",title:"Project category","aria-label":"Project category",children:[(0,a.jsx)("option",{value:"web",children:"Web Development"}),(0,a.jsx)("option",{value:"mobile",children:"Mobile App"}),(0,a.jsx)("option",{value:"design",children:"UI/UX Design"}),(0,a.jsx)("option",{value:"analytics",children:"Data Analytics"}),(0,a.jsx)("option",{value:"marketing",children:"Digital Marketing"}),(0,a.jsx)("option",{value:"music",children:"Music Production"}),(0,a.jsx)("option",{value:"shop",children:"Shop Items"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:E,rows:6,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Enter project description",title:"Project description","aria-label":"Project description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"liveLink",className:"block text-sm font-medium text-gray-700 mb-1",children:"Live Demo URL"}),(0,a.jsx)("input",{id:"liveLink",type:"text",name:"liveLink",value:x.liveLink,onChange:E,className:"w-full p-2 border border-gray-300 rounded",placeholder:"https://example.com/demo",title:"Live demo URL","aria-label":"Live demo URL"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"projectLink",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Link"}),(0,a.jsx)("input",{id:"projectLink",type:"text",name:"projectLink",value:x.projectLink,onChange:E,className:"w-full p-2 border border-gray-300 rounded",placeholder:"https://example.com/project",title:"Project link","aria-label":"Project link"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sourceCodeUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Source Code URL"}),(0,a.jsx)("input",{id:"sourceCodeUrl",type:"text",name:"sourceCodeUrl",value:x.sourceCodeUrl,onChange:E,className:"w-full p-2 border border-gray-300 rounded",placeholder:"https://github.com/username/repo",title:"Source code URL","aria-label":"Source code URL"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-full px-3 py-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 mr-1",children:D(e)}),(0,a.jsx)("button",{type:"button",onClick:()=>A(t),className:"text-gray-500 hover:text-red-500",title:"Remove tag","aria-label":"Remove tag",children:"\xd7"})]},t))}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{id:"newTag",type:"text",value:f,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S())},placeholder:"Add a tag",className:"flex-1 p-2 border border-gray-300 rounded-l",title:"New tag","aria-label":"New tag"}),(0,a.jsx)("input",{id:"tagColor",type:"color",value:w,onChange:e=>N(e.target.value),className:"w-12 border border-gray-300 border-l-0",title:"Tag color","aria-label":"Tag color"}),(0,a.jsx)("button",{type:"button",onClick:S,className:"px-4 py-2 bg-indigo-500 text-white rounded-r hover:bg-indigo-600",title:"Add tag","aria-label":"Add tag",children:"Add"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:r.title}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:(0,c.zk)(r.category)}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:r.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:D(e)},t))}),(0,a.jsx)("div",{className:"prose max-w-none mb-6",children:(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:r.description})}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[r.liveLink&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Live Demo"}),(0,a.jsx)("a",{href:r.liveLink,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800",children:r.liveLink})]}),r.projectLink&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Project Link"}),(0,a.jsx)("a",{href:r.projectLink,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800",children:r.projectLink})]}),r.sourceCodeUrl&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Source Code"}),(0,a.jsx)("a",{href:r.sourceCodeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800",children:r.sourceCodeUrl})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Created: ",(e=>{if(!e)return"N/A";try{if(e&&"function"==typeof e.toDate)return(0,c.p6)(e.toDate());if("number"==typeof e){let t=new Date(e*(e<1e10?1e3:1));return(0,c.p6)(t)}return(0,c.p6)(new Date(e))}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}})(r.createdAt)]})]})})]})]})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsx)(l.Z,{}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Project Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The project you're looking for doesn't exist or has been deleted."}),(0,a.jsx)("button",{onClick:()=>C.push("/projects"),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600",children:"Back to Projects"})]})})]})}},6828:function(e,t,r){"use strict";r.d(t,{$B:function(){return p},$L:function(){return y},He:function(){return n},OL:function(){return d},TC:function(){return l},b3:function(){return u},e5:function(){return h},h8:function(){return b},j:function(){return x},p_:function(){return j},th:function(){return c},ty:function(){return g}});var a=r(4499),i=r(8121),o=r(1657);async function s(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];try{let s=(0,i.hJ)(a.db,"activities");await (0,i.ET)(s,{type:e,description:t,userId:r,timestamp:(0,i.Bt)(),tags:o}),console.log("Activity tracked successfully")}catch(e){throw console.error("Error tracking activity:",e),e}}async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{let t=(0,i.hJ)(a.db,"activities"),r=(0,i.IO)(t,(0,i.Xo)("timestamp","desc"),(0,i.b9)(e));return(await (0,i.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error loading recent activities:",e),e}}async function n(){try{let e=(0,i.hJ)(a.db,"projects"),t=(0,i.IO)(e,(0,i.Xo)("createdAt","desc"));return(await (0,i.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error loading projects:",e),e}}async function c(e){try{return await (0,i.oe)((0,i.JU)(a.db,"projects",e)),(0,o.c0)("Project deleted successfully","success"),!0}catch(e){throw console.error("Error deleting project:",e),(0,o.c0)("Error deleting project","error"),e}}async function d(){try{let e=(0,i.IO)((0,i.hJ)(a.db,"projects")),t=(0,i.IO)((0,i.hJ)(a.db,"activities")),r=(0,i.IO)((0,i.hJ)(a.db,"users")),[o,s,l]=await Promise.all([(0,i.PL)(e),(0,i.PL)(t),(0,i.PL)(r)]),n=s.docs.map(e=>{let t=e.data();return{id:e.id,type:t.type,description:t.description,userId:t.userId,timestamp:t.timestamp instanceof i.EK?t.timestamp.toDate():new Date(t.timestamp)}}).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,5);return{projectsCount:o.size,activitiesCount:s.size,usersCount:l.size,recentActivities:n}}catch(e){throw console.error("Error loading dashboard stats:",e),e}}async function u(e){try{if("system"===e)return"System";let t=(0,i.JU)(a.db,"users",e),r=await (0,i.QT)(t);if(r.exists()){let e=r.data();if(e.email)return e.email;if(e.displayName)return e.displayName}return m(e)}catch(t){return console.error("Error getting user display name:",t),m(e)}}function m(e){let t=["gmail.com","outlook.com","yahoo.com","mail.com","example.com"],r=Math.abs(e.charCodeAt(0)+(e.charCodeAt(e.length-1)||0))%t.length,a=t[r],i="";if(e.length>20){let t=e.substring(0,2).toLowerCase(),r=e.substring(e.length-5).toLowerCase();i="user.".concat(t).concat(r)}else i="user.".concat(e.toLowerCase());return"".concat(i,"@").concat(a)}function p(e){let t={};e.forEach(e=>{if(!e.timestamp)return;let r=(e.timestamp instanceof i.EK?e.timestamp.toDate():new Date(e.timestamp)).toISOString().split("T")[0];t[r]?t[r]++:t[r]=1});let r=Object.keys(t).sort();return{labels:r.map(e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})),data:r.map(e=>t[e])}}async function h(e){try{let t=(0,i.JU)(a.db,"projects",e),r=await (0,i.QT)(t);if(r.exists())return{id:r.id,...r.data()};return null}catch(e){throw console.error("Error getting project:",e),(0,o.c0)("Error loading project details","error"),e}}async function g(e,t){try{let r=(0,i.JU)(a.db,"projects",e),s={...t,updatedAt:(0,i.Bt)()};return await (0,i.r7)(r,s),(0,o.c0)("Project updated successfully","success"),!0}catch(e){throw console.error("Error updating project:",e),(0,o.c0)("Error updating project","error"),e}}async function x(){try{let e=(0,i.hJ)(a.db,"activities"),t=(0,i.IO)(e,(0,i.Xo)("timestamp","desc"));return(await (0,i.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error loading all activities:",e),e}}async function j(){try{let e=(0,i.hJ)(a.db,"users");return(await (0,i.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error loading users:",e),e}}async function b(e){try{let t=(0,i.JU)(a.db,"users",e);if(!(await (0,i.QT)(t)).exists())throw Error("User not found");await (0,i.oe)(t);try{let t=await fetch("/api/users/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!t.ok){let e=await t.json();console.error("Error from delete API:",e)}}catch(e){console.error("Error calling auth delete API:",e)}return await s("delete","Deleted a user account","system",["user","account","delete"]),(0,o.c0)("User deleted successfully","success"),!0}catch(e){throw console.error("Error deleting user:",e),(0,o.c0)("Error deleting user","error"),e}}async function y(e){try{let t=(0,i.Bt)(),r=(0,i.hJ)(a.db,"projects"),l={...e,createdAt:t,updatedAt:t},n=await (0,i.ET)(r,l),c=e.tags.map(e=>"string"==typeof e?e:e.name);return await s("create","Created a new project: ".concat(e.title),e.createdBy,["project","create",...c]),(0,o.c0)("Project created successfully","success"),n.id}catch(e){throw console.error("Error creating project:",e),(0,o.c0)("Error creating project","error"),e}}}},function(e){e.O(0,[4358,5239,8218,201,8792,8156,127,2971,8069,1744],function(){return e(e.s=6630)}),_N_E=e.O()}]);