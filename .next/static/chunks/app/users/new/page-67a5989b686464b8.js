(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2110],{5345:function(e,s,a){Promise.resolve().then(a.bind(a,263))},263:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var l=a(7437),r=a(2265),t=a(7907),n=a(9),i=a(1441),d=a(2406),c=a(7065),o=a(8121),u=a(4499),m=a(1657);function x(){let[e,s]=(0,r.useState)(""),[a,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,b]=(0,r.useState)("user"),[j,v]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),w=(0,t.useRouter)(),{user:N}=(0,d.useAuth)(),k=(null==N?void 0:N.email)==="rennielgeogeanga12@gmail.com",E=async s=>{if(s.preventDefault(),!N){w.push("/login");return}if(!e||!a){y("Email and password are required");return}try{if(v(!0),y(null),"admin"===p&&"rennielgeogeanga12@gmail.com"!==N.email){y("You cannot create admin users"),v(!1);return}let s=(await (0,c.Xb)(u.I8,e,a)).user;await (0,o.pl)((0,o.JU)(u.db,"users",s.uid),{email:e,displayName:h,role:p,createdAt:new Date,createdBy:N.uid}),(0,m.c0)("User created successfully","success"),w.push("/users")}catch(e){console.error("Error creating user:",e),"auth/email-already-in-use"===e.code?y("An account with this email already exists"):"auth/invalid-email"===e.code?y("Invalid email address"):"auth/weak-password"===e.code?y("Password is too weak - must be at least 6 characters"):y("Failed to create user. Please try again."),v(!1)}};return N?k?(0,l.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,l.jsx)(i.Z,{}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[(0,l.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New User"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Create a new user account"})]}),(0,l.jsxs)("button",{className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-300",onClick:()=>w.push("/users"),children:[(0,l.jsx)(n.Ao2,{size:18}),(0,l.jsx)("span",{children:"Back to Users"})]})]}),f&&(0,l.jsxs)("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 flex items-start",children:[(0,l.jsx)(n.bcx,{className:"mt-0.5 mr-2 flex-shrink-0"}),(0,l.jsx)("span",{children:f})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,l.jsxs)("form",{onSubmit:E,className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,l.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-2 text-gray-500",children:(0,l.jsx)(n.Imn,{})}),(0,l.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>s(e.target.value),className:"block w-full px-3 py-2 outline-none",placeholder:"Enter email address",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,l.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-2 text-gray-500",children:(0,l.jsx)(n.UIZ,{})}),(0,l.jsx)("input",{id:"password",type:"password",value:a,onChange:e=>x(e.target.value),className:"block w-full px-3 py-2 outline-none",placeholder:"Enter password",required:!0})]}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),(0,l.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-2 text-gray-500",children:(0,l.jsx)(n.fzv,{})}),(0,l.jsx)("input",{id:"displayName",type:"text",value:h,onChange:e=>g(e.target.value),className:"block w-full px-3 py-2 outline-none",placeholder:"Enter display name"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,l.jsxs)("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-gray-50 p-2 text-gray-500",children:(0,l.jsx)(n.E25,{})}),(0,l.jsxs)("select",{id:"role",value:p,onChange:e=>b(e.target.value),className:"block w-full px-3 py-2 outline-none",children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"editor",children:"Editor"}),"rennielgeogeanga12@gmail.com"===N.email&&(0,l.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"Creating..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.zy7,{size:18}),(0,l.jsx)("span",{children:"Create User"})]})})})]})})]})]}):(w.push("/"),null):(w.push("/login"),null)}}},function(e){e.O(0,[4358,5239,8218,201,8792,8156,127,2971,8069,1744],function(){return e(e.s=5345)}),_N_E=e.O()}]);