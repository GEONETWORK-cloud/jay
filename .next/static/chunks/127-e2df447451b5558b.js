"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{1441:function(e,t,r){r.d(t,{Z:function(){return d}});var a=r(7437),n=r(8792),s=r(2265),i=r(7907),c=r(9),o=r(2406),l=r(8121),u=r(4499),h=r(7815);function d(){let[e,t]=(0,s.useState)(!1),{user:r,logout:d}=(0,o.useAuth)(),m=(0,i.usePathname)(),[f,x]=(0,s.useState)({name:"User",email:"",avatar:"https://via.placeholder.com/40",showEmail:!0,emailPrivacy:!1,notifications:!1,privacy:"public",theme:"dark",username:"",updatedAt:null}),p=e=>{if(!e)return"https://via.placeholder.com/40";let t=(0,h.createHash)("md5").update(e.toLowerCase().trim()).digest("hex");return"https://www.gravatar.com/avatar/".concat(t,"?s=40&d=mp")};(0,s.useEffect)(()=>{!async function(){if(!r)return;let e=r.email?p(r.email):"https://via.placeholder.com/40",t={name:r.displayName||"User",email:r.email||"",avatar:r.photoURL||e,showEmail:!0,emailPrivacy:!1,notifications:!1,privacy:"public",theme:"dark",username:"",updatedAt:null};x(t);try{let a=(0,l.JU)(u.db,"users",r.uid),n=await (0,l.QT)(a);if(n.exists()){let a=n.data();x({name:a.displayName||t.name,email:r.email||"",avatar:a.photoURL||r.photoURL||e,showEmail:!1!==a.showEmail,emailPrivacy:!0===a.emailPrivacy,notifications:!0===a.notifications,privacy:a.privacy||"public",theme:a.theme||"dark",username:a.username||"",updatedAt:a.updatedAt||null})}}catch(e){console.error("Error fetching user data:",e)}}()},[r]);let g=[{icon:(0,a.jsx)(c.m6D,{size:20}),label:"Dashboard",href:"/"},{icon:(0,a.jsx)(c.QoU,{size:20}),label:"Projects",href:"/projects"},{icon:(0,a.jsx)(c.bAx,{size:20}),label:"Activities",href:"/activities"},{icon:(0,a.jsx)(c.vlc,{size:20}),label:"Calendar",href:"/calendar"}],y=[{icon:(0,a.jsx)(c.yG,{size:20}),label:"Categories",href:"/categories"},{icon:(0,a.jsx)(c.Xm1,{size:20}),label:"Music",href:"/music",onClick:e=>{"/music"===m&&(e.preventDefault(),window.dispatchEvent(new CustomEvent("initialize-music")))}},{icon:(0,a.jsx)(c.x8h,{size:20}),label:"Shop",href:"/shop"}],j=async()=>{try{await d()}catch(e){console.error("Logout failed:",e)}},w=e=>("/projects"!==e||"/projects/create"!==m)&&!!("/"===e&&"/"===m||"/"!==e&&m.startsWith(e));return((null==r?void 0:r.email)==="rennielgeogeanga12@gmail.com"&&g.push({icon:(0,a.jsx)(c.WY8,{size:20}),label:"Users",href:"/users"},{icon:(0,a.jsx)(c.nbt,{size:20}),label:"Settings",href:"/settings"}),r)?(0,a.jsxs)("aside",{className:"bg-gray-800 text-white transition-all duration-300 ".concat(e?"w-20":"w-64"," h-screen flex flex-col"),children:[(0,a.jsxs)("div",{className:"p-4 flex justify-between items-center border-b border-gray-700",children:[!e&&(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Admin Panel"}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-white focus:outline-none",onClick:()=>t(!e),children:e?"→":"←"})]}),!e&&(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"relative h-10 w-10 rounded-full overflow-hidden bg-gray-600 mr-3",children:(0,a.jsx)("img",{src:f.avatar,alt:"User Avatar",className:"h-full w-full object-cover",onError:e=>{let t=e.target;(null==r?void 0:r.email)?t.src=p(r.email):t.src="https://via.placeholder.com/40"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:f.username||f.name}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:f.emailPrivacy?(e=>{if(!e)return"**********@gmail.com";let[t,r]=e.split("@"),a=t.charAt(0)+"*".repeat(t.length-1);return"".concat(a,"@").concat(r)})(f.email):f.email}),"public"===f.privacy&&(0,a.jsx)("p",{className:"text-xs text-green-400 mt-1",children:"Public Profile"})]})]})}),(0,a.jsxs)("nav",{className:"mt-4 flex-1 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider ".concat(e?"text-center":""),children:e?"•••":"MAIN"}),(0,a.jsxs)("ul",{className:"mt-2",children:[g.map((t,r)=>(0,a.jsx)("li",{children:(0,a.jsxs)(n.default,{href:t.href,className:"flex items-center px-4 py-3 ".concat(w(t.href)?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700"," transition-colors\n                    ").concat(e?"justify-center":"space-x-3"),children:[(0,a.jsx)("span",{className:w(t.href)?"text-white":"text-gray-400",children:t.icon}),!e&&(0,a.jsx)("span",{children:t.label})]})},r)),(0,a.jsx)("li",{children:(0,a.jsxs)(n.default,{href:"/projects/create",className:"flex items-center px-4 py-3 ".concat(w("/projects/create")?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700"," transition-colors\n                  ").concat(e?"justify-center":"space-x-3"),children:[(0,a.jsx)("span",{className:w("/projects/create")?"text-white":"text-gray-400",children:(0,a.jsx)(c.O9D,{size:20})}),!e&&(0,a.jsx)("span",{children:"Create Project"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider ".concat(e?"text-center":""),children:e?"•••":"CATEGORIES"}),(0,a.jsx)("ul",{className:"mt-2",children:y.map((t,r)=>(0,a.jsx)("li",{children:(0,a.jsxs)(n.default,{href:t.href,className:"flex items-center px-4 py-3 ".concat(w(t.href)?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700"," transition-colors\n                    ").concat(e?"justify-center":"space-x-3"),children:[(0,a.jsx)("span",{className:w(t.href)?"text-white":"text-gray-400",children:t.icon}),!e&&(0,a.jsx)("span",{children:t.label})]})},r))})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700",children:[(0,a.jsxs)(n.default,{href:"/settings",className:"flex items-center mb-4 ".concat(w("/settings")?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700"," transition-colors px-4 py-2 rounded\n            ").concat(e?"justify-center":"space-x-3"),children:[(0,a.jsx)("span",{className:w("/settings")?"text-white":"text-gray-400",children:(0,a.jsx)(c.nbt,{size:20})}),!e&&(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsxs)("button",{onClick:j,className:"flex items-center w-full px-4 py-2 rounded text-gray-300 hover:bg-gray-700 hover:text-white transition-colors\n            ".concat(e?"justify-center":"space-x-3"),children:[(0,a.jsx)(c.xqh,{size:20}),!e&&(0,a.jsx)("span",{children:"Logout"})]})]})]}):null}},2406:function(e,t,r){r.r(t),r.d(t,{AuthProvider:function(){return h},useAuth:function(){return u}});var a=r(7437),n=r(2265),s=r(7065),i=r(4499),c=r(8121),o=r(7907);let l=(0,n.createContext)(void 0);function u(){let e=(0,n.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function h(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[h,d]=(0,n.useState)(!0),m=(0,o.useRouter)();(0,n.useEffect)(()=>{let e=(0,s.Aj)(i.I8,e=>{u(e),d(!1)});return()=>e()},[]);let f=async(e,t)=>{try{await (0,s.e5)(i.I8,e,t),m.push("/")}catch(e){throw console.error("Login error:",e.code,e.message),e}},x=async(e,t,r)=>{try{if("ADMIN123"!==r)throw Error("Invalid admin code");let{user:a}=await (0,s.Xb)(i.I8,e,t);await (0,c.pl)((0,c.JU)(i.db,"users",a.uid),{email:a.email,role:"admin",createdAt:new Date().toISOString()}),m.push("/")}catch(e){throw console.error("Signup error:",e.code,e.message),e}},p=async()=>{try{await (0,s.w7)(i.I8),m.push("/login")}catch(e){throw console.error("Logout error:",e.code,e.message),e}},g=async e=>{try{await (0,s.LS)(i.I8,e)}catch(e){throw console.error("Reset password error:",e.code,e.message),e}};return(0,a.jsx)(l.Provider,{value:{user:r,loading:h,login:f,signup:x,logout:p,resetPassword:g},children:!h&&t})}},4499:function(e,t,r){r.d(t,{I8:function(){return o},db:function(){return l},tO:function(){return u}});var a=r(6142),n=r(7065),s=r(8121),i=r(4905);let c=(0,a.ZF)({apiKey:"AIzaSyACe57ULrtFWBkTMZaExGTuCJb8GKhawPw",authDomain:"finals-calculator-21.firebaseapp.com",projectId:"finals-calculator-21",storageBucket:"finals-calculator-21.firebasestorage.app",messagingSenderId:"234377632584",appId:"1:234377632584:web:bf92d92752829426f0717d",measurementId:"G-9CYRQR52LP"}),o=(0,n.v0)(c),l=(0,s.ad)(c),u=(0,i.cF)(c)},1657:function(e,t,r){r.d(t,{BK:function(){return i},c0:function(){return s},cn:function(){return u},p6:function(){return c},y0:function(){return l},zk:function(){return o}});var a=r(3167),n=r(1367);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("[".concat(t,"] ").concat(e))}function i(e){try{let t=new Date,r=new Date(e);if(isNaN(r.getTime()))return"recently";let a=t.getTime()-r.getTime(),n=Math.floor(a/1e3),s=Math.floor(n/60),i=Math.floor(s/60),c=Math.floor(i/24),o=Math.floor(c/30),l=Math.floor(c/365);if(n<60)return"just now";if(s<60)return"".concat(s," ").concat(1===s?"minute":"minutes"," ago");if(i<24)return"".concat(i," ").concat(1===i?"hour":"hours"," ago");if(c<30)return"".concat(c," ").concat(1===c?"day":"days"," ago");if(o<12)return"".concat(o," ").concat(1===o?"month":"months"," ago");return"".concat(l," ").concat(1===l?"year":"years"," ago")}catch(e){return console.error("Error formatting time:",e),"recently"}}function c(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function o(e){return({web:"Web Development",mobile:"Mobile App",design:"UI/UX Design",analytics:"Data Analytics",marketing:"Digital Marketing",music:"Music Production",shop:"Shop Items"})[e.toLowerCase()]||e}function l(e,t,r,a){let n=null;window.requestAnimationFrame(function s(i){n||(n=i);let c=Math.min((i-n)/r,1);a(Math.floor(c*(t-e)+e)),c<1?window.requestAnimationFrame(s):a(t)})}function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}}]);